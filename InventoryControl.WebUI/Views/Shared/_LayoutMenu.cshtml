@using AWASP.WebUI.Identity.Constants

<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
    <div class="app-brand demo">
    <a href="index.html" class="app-brand-link">
        <span class="app-brand-logo demo">
            <i class='bx bxs-book-content' style="FONT-SIZE: 28px;color: var(--font-menu) !important;"></i>
        </span>
        <span class="app-brand-text demo menu-text fw-bolder ms-2" style="text-align:center;text-transform:uppercase">DN</span>
    </a>
    <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
        <i class="bx bx-chevron-left bx-sm align-middle"></i>
    </a>
    </div>
    <div class="menu-inner-shadow"></div>
    <ul class="menu-inner py-1">
        @if (Context.User.IsInRole(Roles.VISUALIZAR_DASHBOARD))
        {
            <li class="menu-item @VerifyMenuConditions(Roles.VISUALIZAR_DASHBOARD, false)">
                <a asp-controller="home" asp-action="index" class="menu-link">
                    <i class="menu-icon tf-icons bx bx-home-circle"></i>
                    <div>Painel Gerencial</div>
                </a>
            </li>
        }
        </ul>
</aside>

@functions {
    string VerifyMenuConditions(string menu, bool hasParents)
    {
        var action = ViewContext.RouteData.Values["Action"].ToString().ToLower();
        var controller = ViewContext.RouteData.Values["Controller"].ToString().ToLower();
        var classe = "";

        if (menu.Equals(Roles.VISUALIZAR_DASHBOARD) && (controller.ToLower().Equals("home")))
        {
            classe = "active";
        }
        if (hasParents && !string.IsNullOrEmpty(classe))
        {
            classe += " open";
        }
        return classe;
    }

    string VerifyMenuItemConditions(string menu, string actionMenu)
    {
        var action = ViewContext.RouteData.Values["Action"].ToString().ToLower();
        var controller = ViewContext.RouteData.Values["Controller"].ToString().ToLower();
        var classe = "";

        if (menu.Equals(Roles.VISUALIZAR_DASHBOARD) && (controller.ToLower().Equals("home")) && action == "")
        {
            classe = "active";
        }

        if (!string.IsNullOrEmpty(classe) && action.ToLower() == actionMenu.ToLower())
        {
            return classe;
        }
        else
        {
            classe = ""; ;
        }

        return classe;
    }

}